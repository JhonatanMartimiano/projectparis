$(function(){var ajaxResponseBaseTime=3;var ajaxResponseRequestError="<div class='message error icon-warning'>Desculpe mas não foi possível processar sua requisição...</div>";$(".mobile_menu").click(function(e){e.preventDefault();var menu=$(".dash_sidebar");menu.animate({right:0},200,function(e){$("body").css("overflow","hidden")});menu.one("mouseleave",function(){$(this).animate({right:'-260'},200,function(e){$("body").css("overflow","auto")})})});function notificationsCount(){var center=$(".notification_center_open");$.post(center.data("count"),function(response){if(response.count){center.html(response.count)}else{center.html("0")}},"json")}
function notificationHtml(link,image,notify,date){return'<div data-notificationlink="'+link+'" class="notification_center_item radius transition">\n'+'    <div class="image">\n'+'        <img class="rounded" src="'+image+'"/>\n'+'    </div>\n'+'    <div class="info">\n'+'        <p class="title">'+notify+'</p>\n'+'        <p class="time icon-clock-o">'+date+'</p>\n'+'    </div>\n'+'</div>'}
notificationsCount();setInterval(function(){notificationsCount()},1000*50);$(".notification_center_open").click(function(e){e.preventDefault();var notify=$(this).data("notify");var center=$(".notification_center");$.post(notify,function(response){if(response.message){ajaxMessage(response.message,ajaxResponseBaseTime)}
var centerHtml="";if(response.notifications){$.each(response.notifications,function(e,notify){centerHtml+=notificationHtml(notify.link,notify.image,notify.title,notify.created_at)});center.html(centerHtml);center.css("display","block").animate({right:0},200,function(e){$("body").css("overflow","hidden")})}},"json");center.one("mouseleave",function(){$(this).animate({right:'-320'},200,function(e){$("body").css("overflow","auto");$(this).css("display","none")})});notificationsCount()});$(".notification_center").on("click","[data-notificationlink]",function(){window.location.href=$(this).data("notificationlink")});$("[data-post]").click(function(e){e.preventDefault();var clicked=$(this);var data=clicked.data();var load=$(".ajax_load");if(data.confirm){var deleteConfirm=confirm(data.confirm);if(!deleteConfirm){return}}
$.ajax({url:data.post,type:"POST",data:data,dataType:"json",beforeSend:function(){load.fadeIn(200).css("display","flex")},success:function(response){if(response.redirect){window.location.href=response.redirect}else{load.fadeOut(200)}
if(response.reload){window.location.reload()}else{load.fadeOut(200)}
if(response.message){ajaxMessage(response.message,ajaxResponseBaseTime)}},error:function(){ajaxMessage(ajaxResponseRequestError,5);load.fadeOut()}})});$("form:not('.ajax_off')").submit(function(e){e.preventDefault();var form=$(this);var load=$(".ajax_load");if(typeof tinyMCE!=='undefined'){tinyMCE.triggerSave()}
form.ajaxSubmit({url:form.attr("action"),type:"POST",dataType:"json",beforeSend:function(){load.fadeIn(200).css("display","flex")},uploadProgress:function(event,position,total,completed){var loaded=completed;var load_title=$(".ajax_load_box_title");load_title.text("Enviando ("+loaded+"%)");if(completed>=100){load_title.text("Aguarde, carregando...")}},success:function(response){if(response.redirect){window.location.href=response.redirect}else{form.find("input[type='file']").val(null);load.fadeOut(200)}
if(response.reload){window.location.reload()}else{load.fadeOut(200)}
if(response.message){ajaxMessage(response.message,ajaxResponseBaseTime)}
if(response.mce_image){$('.mce_upload').fadeOut(200);tinyMCE.activeEditor.insertContent(response.mce_image)}},complete:function(){if(form.data("reset")===!0){form.trigger("reset")}},error:function(){ajaxMessage(ajaxResponseRequestError,5);load.fadeOut()}})});function ajaxMessage(message,time){var ajaxMessage=$(message);ajaxMessage.append("<div class='message_time'></div>");ajaxMessage.find(".message_time").animate({"width":"100%"},time*1000,function(){$(this).parents(".message").fadeOut(200)});$(".ajax_response").append(ajaxMessage);ajaxMessage.effect("bounce")}
$(".ajax_response .message").each(function(e,m){ajaxMessage(m,ajaxResponseBaseTime+=1)});$(".ajax_response").on("click",".message",function(e){$(this).effect("bounce").fadeOut(1)})});tinyMCE.init({selector:"textarea.mce",language:'pt_BR',menubar:!1,theme:"modern",height:132,skin:'light',entity_encoding:"raw",theme_advanced_resizing:!0,plugins:["advlist autolink link image lists charmap print preview hr anchor pagebreak spellchecker","searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking","save table contextmenu directionality emoticons template paste textcolor media"],toolbar:"styleselect | pastetext | removeformat |  bold | italic | underline | strikethrough | bullist | numlist | alignleft | aligncenter | alignright |  link | unlink | fsphpimage | code | fullscreen",style_formats:[{title:'Normal',block:'p'},{title:'Titulo 3',block:'h3'},{title:'Titulo 4',block:'h4'},{title:'Titulo 5',block:'h5'},{title:'Código',block:'pre',classes:'brush: php;'}],link_class_list:[{title:'None',value:''},{title:'Blue CTA',value:'btn btn_cta_blue'},{title:'Green CTA',value:'btn btn_cta_green'},{title:'Yellow CTA',value:'btn btn_cta_yellow'},{title:'Red CTA',value:'btn btn_cta_red'}],setup:function(editor){editor.addButton('fsphpimage',{title:'Enviar Imagem',icon:'image',onclick:function(){$('.mce_upload').fadeIn(200,function(e){$("body").click(function(e){if($(e.target).attr("class")==="mce_upload"){$('.mce_upload').fadeOut(200)}})}).css("display","flex")}})},link_title:!1,target_list:!1,theme_advanced_blockformats:"h1,h2,h3,h4,h5,p,pre",media_dimensions:!1,media_poster:!1,media_alt_source:!1,media_embed:!1,extended_valid_elements:"a[href|target=_blank|rel|class]",imagemanager_insert_template:'<img src="{$url}" title="{$title}" alt="{$title}" />',image_dimensions:!1,relative_urls:!1,remove_script_host:!1,paste_as_text:!0})